<section>
  <div class="container">
    <div class=" my-3">
      <h2 class="text-center py-3">{{'product.update' | translate}}</h2>
    </div>
  </div>
 
    <div class="container ">
        <form  [formGroup]="updateProduct" (ngSubmit)="saveItem(updateProduct)">
        <div class="row my-3 ">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="txtproductName">{{'product.labels.name' | translate}}</label><span class="red-color">*</span>
                    <input type="text" id="txtproductName"  class="form-control"
                      placeholder="{{'product.labels.name' | translate}}" formControlName="ProductName" 
                />
                <div *ngIf="updateProduct.get('ProductName')?.errors && updateProduct.get('ProductName')?.touched" class="text-danger">
                  <p *ngIf="updateProduct.get('ProductName')?.getError('required')" class="alert alert-danger">{{'errors.required'|translate}}</p>
                
                
                </div>
                  </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                  <label for="txtcategoryId">Category</label><span class="red-color">*</span>
                  <select name="categoryId" class="form-control" (change)="getCategoryValue($event)" id="" formControlName="categoryId" >
                    <option value="{{category.id}}" *ngFor="let category of categories">{{category.nameEn}}</option>
                  </select>
                
             
                </div>
          </div>

         
         
        </div>


        <div class="row my-3 ">
          <div class="col-lg-4">
                 <div class="form-group">
                  <label for="txttraderPrice">{{ 'product.labels.traderPrice' | translate }}</label><span class="red-color">*</span>
                  <input type="text" id="txtraderPrice" class="form-control"
                    placeholder="{{ 'product.labels.traderPrice' | translate }}" formControlName="traderPrice" 
                   />
                   <div *ngIf="updateProduct.get('traderPrice')?.errors && updateProduct.get('traderPrice')?.touched" class="text-danger">
                    <p *ngIf="updateProduct.get('traderPrice')?.getError('required')" class="alert alert-danger">{{'errors.required'|translate}}</p>
                  
                  
                  </div>
                </div>
                
          </div>
          <div class="col-lg-4">
              <div class="form-group">
                  <label for="txttraderDiscount">{{ 'product.labels.traderDiscount' | translate }}</label><span class="red-color">*</span>
                  <input type="text" id="txttraderDiscount" class="form-control"
                    placeholder="{{ 'product.labels.traderDiscount' | translate }}" formControlName="traderDiscount" 
                     />
                   
                     <div *ngIf="updateProduct.get('traderDiscount')?.errors && updateProduct.get('traderDiscount')?.touched" class="text-danger">
                      <p class="alert alert-danger">Invalid percentage value. Enter a number between 0% and 100%.</p>
                    </div>
                </div>
               
          </div>
          <div class="col-lg-4">
            <div class="form-group">
                <label for="txtquantity">{{ 'product.labels.quantity' | translate }}</label><span class="red-color">*</span>
                <input type="text" id="txtquantity" class="form-control"
                  placeholder="{{ 'product.labels.quantity' | translate }}" formControlName="quantity" 
                 />
                 <div *ngIf="updateProduct.get('quantity')?.errors && updateProduct.get('quantity')?.touched" class="text-danger">
                  <p *ngIf="updateProduct.get('quantity')?.getError('required')" class="alert alert-danger">{{'errors.required'|translate}}</p>
                
                
                </div>
              </div>
        </div>
      </div>

      <div class="row my-3">
          
        <div class="col-md-6">
            <div class="form-group">
                <label for="txtcustomerPrice">{{ 'product.labels.customerPrice' | translate }}</label><span class="red-color">*</span>
                <input type="text" id="txtcustomerPrice"  class="form-control"
                  placeholder="{{ 'product.labels.customerPrice' | translate }}" formControlName="customerPrice" 
               />
               <div *ngIf="updateProduct.get('customerPrice')?.errors && updateProduct.get('customerPrice')?.touched" class="text-danger">
                <p *ngIf="updateProduct.get('customerPrice')?.getError('required')" class="alert alert-danger">{{'errors.required'|translate}}</p>
              
              
              </div>
       
              </div>

              
        </div>

        <div class="col-md-6">
          <div class="form-group">
              <label for="txtcustomerDiscount">{{ 'product.labels.customerDiscount' | translate }}</label><span class="red-color">*</span>
              <input type="text" id="txtcustomerDiscount"class="form-control"
                placeholder="{{ 'product.labels.customerDiscount' | translate }}" formControlName="customerDiscount" 
                />
                <div *ngIf="updateProduct.get('customerDiscount')?.errors && updateProduct.get('customerDiscount')?.touched" class="text-danger">
                  <p class="alert alert-danger">{{'errors.discount'}}</p>
                </div>
            </div>
      </div>
    </div>
          <div class="row my-3">
            <div class="col-md-12">
              <div class="form-group">
                  <label for="txtdescription">{{ 'product.labels.description' | translate }}</label><span class="red-color">*</span>
                  <textarea type="text" id="txtdescription"  class="form-control"
                  placeholder="{{ 'product.labels.description' | translate }}" formControlName="Description" 
                  cols="100" rows="5"
                  >

                  </textarea>
                  <div *ngIf="updateProduct.get('Description')?.errors && updateProduct.get('Description')?.touched" class="text-danger">
                    <p *ngIf="updateProduct.get('Description')?.getError('required')" class="alert alert-danger">{{'errors.required'|translate}}</p>
                    <p *ngIf="updateProduct.get('Description')?.getError('maxlength')" class="alert alert-danger">{{'errors.maxlength'|translate}} 2000</p>
                    <p *ngIf="updateProduct.get('Description')?.getError('minlength')" class="alert alert-danger">{{'errors.minlength'|translate}} 2 </p>
                  
                  
                  </div>
            
                </div>
          </div>
          </div>

     


    



        <div class="row mb-1">
        
           
        </div>


        <div class="row mb-1">
          
         
        </div>


        <div class="row mb-1">
            <div class="col-md-12">
                   
                <div class="form-group">
                  <p-fileUpload 
                  formControlName="NewImages"
                  max-size="10000"
                  accept="image/*" 
                  [multiple]="true" 
                   [customUpload]="true" 
                   (onSelect)="onUpload($event)"
                   chooseLabel="{{'ChooseImage'|translate}}">



                      <!-- Custom content inside the file upload area -->
                      <ng-template pTemplate="content">
                       <div class="p-fileupload-content">
                         <!-- Display the retrieved image when editing -->
                          <ng-container *ngIf="product.images">
                            <ng-container *ngFor="let image of product.images">
                                  <img  
                                  [src]="'https://roseirae.runasp.net/'+image" 
                                  class="m-3"
                                  alt="User Image" 
                                  style="max-width: 100px; margin-top: 10px;" />
                              
                           
                            </ng-container>
                          </ng-container>
                       
                       </div>
                     </ng-template>
               </p-fileUpload>

               <div *ngIf="updateProduct.get('images')?.errors && updateProduct.get('images')?.touched" class="text-danger">
                <p *ngIf="updateProduct.get('images')?.getError('required')" class="alert alert-danger">{{'errors.images'|translate}}</p>
              </div>
               
                </div>
            </div>
           
        </div>
        

        <div class="row my-3">
            <div class="form-actions">
              <button type="button" class="btn btn-raised btn-warning mr-2" [routerLink]="['/product/products']">
                <i class="ft-x"></i> {{'cancel' | translate}}
              </button>
              
              <button type="submit" 
                  [class]="!updateProduct.valid || !updateProduct.dirty ? 'btn btn-raised btn-secondary mr-1' : 'btn btn-raised btn-primary mr-1'">
                  <i class="fas ft-save"></i> {{'save' | translate}}
                </button>
               
            </div>
        </div>

      </form>
    </div>
</section>