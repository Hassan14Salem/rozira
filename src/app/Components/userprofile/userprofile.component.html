<div class="container">
  <div class="card">


    <div class="card">

      <p-toolbar styleClass="mb-4 gap-2" *ngIf="hasPermission('CreateContactus')">
        <ng-template pTemplate="left">
          <h5 class="fw-bold">{{userinfo.userName}} Profile</h5>
        </ng-template>
        <ng-template pTemplate="right">
          <button pButton pRipple label="Change password" icon="pi pi-user-edit" class="p-button-success mr-2"
            (click)="changepassword()"></button>
        </ng-template>
      </p-toolbar>
      <p-toolbar styleClass="mb-4 gap-2" *ngIf="hasPermission('CreateContactus')">
        <table class="table text-center">
          <thead>
            <tr>
              <th>Username</th>
              <th>Email Value</th>
              <th>Phone number</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{userinfo.userName}}</td>
              <td>{{userinfo.email}}</td>
              <td>{{userinfo.phoneNumber}}</td>
              <td>{{userinfo.role}}</td>
            </tr>
            <tr>
              <td><button type="submit" class="btn btn-primary text-white" (click)=" openUserForm()">
                  <span>Edit</span>
                </button>
              </td>
              <td><button type="submit" class="btn btn-primary text-white">
                  <span>Edit</span>
                </button>
              </td>
              <td><button type="submit" class="btn btn-primary text-white">
                  <span>Edit</span>
                </button>
              </td>
              <td><button type="submit" class="btn btn-primary text-white">
                  <span>Edit</span>
                </button>
              </td>

            </tr>
          </tbody>
        </table>

      </p-toolbar>

    </div>
  </div>

</div>





<p-dialog [(visible)]="editUserNameV" [style]="{width: '50%'}" header="Edit {{userinfo.userName}}" [modal]="true"
  styleClass="p-fluid">
  <form [formGroup]="editUserForm" (ngSubmit)="editUserName(editUserForm)">
    <div>
      <div class="form-group my-2 col-lg-6">
        <input formControlName="userName" type="text" class="form-control" id="usernameFormControll"
          placeholder="Username" aria-label="Username" [attr.aria-invalid]="editUserForm.get('userName')?.invalid">
        <div class="alert alert-danger"
          *ngIf="editUserForm.get('userName')?.errors && editUserForm.get('userName')?.touched">
          <p *ngIf="editUserForm.get('userName')?.getError('required')">Username
            is required</p>
          <p *ngIf="editUserForm.get('userName')?.getError('minlength')">Username
            must be atleast 2 characters</p>
          <p *ngIf="editUserForm.get('userName')?.getError('maxlength')">Username
            cannot exceed
            25 characters</p>
        </div>
      </div>

      <div class="form-group my-2 col-lg-6">
        <label for="phoneNumberFormControll"> {{'tableHeader.phoneNum'|translate}}</label>

        <input formControlName="phoneNumber" type="phone" class="form-control" id="phoneNumberFormControll"
          placeholder="Phone Number" readonly >

        <div>

          <div class="alert alert-danger"
            *ngIf="editUserForm.get('phoneNumber')?.errors && editUserForm.get('phoneNumber')?.touched">
            <p *ngIf="editUserForm.get('phoneNumber')?.getError('required')">Phone
              number is required.</p>
            <p *ngIf="editUserForm.get('phoneNumber')?.getError('pattern')">Invalid
              phone number format.</p>

          </div>
        </div>
      </div>
      <div class="form-group my-2 col-lg-6">
        <label for="emailFormControll"> {{'tableHeader.email'|translate}}</label>
        <input formControlName="email" type="email" class="form-control" id="emailFormControll" placeholder="Email" readonly>

        <div>
          <div class="alert alert-danger"
            *ngIf="editUserForm.get('email')?.errors && editUserForm.get('email')?.touched">
            <p *ngIf="editUserForm.get('email')?.getError('required')">Email is
              required.</p>
            <p *ngIf="editUserForm.get('email')?.getError('email')">Invalid email
              format.</p>
          </div>
        </div>
      </div>
      <div class="form-group  col-lg-6">
        <label for="role" class="mb-2">{{'tableHeader.role'|translate}}</label>
        <select formControlName="role" class="form-control" id="roleFormControll" readonly>
          <option *ngFor="let role of roles" value="{{role.name}}">{{role.name}}</option>
        </select>
        <div>
          <div class="alert alert-danger" *ngIf="editUserForm.get('role')?.errors && editUserForm.get('role')?.touched">
            <p *ngIf="editUserForm.get('role')?.getError('required')">Role is
              required.</p>
            <p *ngIf="editUserForm.get('role')?.getError('pattern')">Role must be
              either Admin or User.</p>

          </div>
        </div>
      </div>

      <div class="text-end p-2">
        <button type="submit" class="btn btn-primary text-white" [disabled]="editUserForm.invalid">
          <span>Update username</span>
        </button>
      </div>
    </div>
  </form>




</p-dialog>